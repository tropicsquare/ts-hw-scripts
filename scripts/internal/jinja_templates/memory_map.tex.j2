{%- macro format_address(value) -%}
    {{ "0x{:09_X}".format(value).replace("_", " ") }}
{%- endmacro %}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Autogenerated by TS Memory Map Generator
% Input: {{ header.filename.name }}
% Date: {{ date.strftime("%I:%M%p on %B %d, %Y") }}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% {{ body.name }}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagebreak
\TsSection { {{- body.name -}} }

\textbf{Base Address:} {{ format_address(body.start_addr) }}
\newline
\textbf{End Address:} {{ format_address(body.end_addr) }}
\vspace{4mm}

\begin{TropicRatioTable3Col}
{0.6}                                         {0.3}                               {0.1}
{Memory region                                & Address offset range              & Size}
{% for subsection in body.regions %}
    \multirow {2} {*} {\hyperref[subsec:{{ subsection.name }}] { {{- subsection.name -}} }} & {{ format_address(subsection.start_addr) }} & \multirow {2} {*} { {{- subsection.size -}} } \\
                                                    & {{ format_address(subsection.end_addr) }} &    \Ttlb%
{% endfor %}
\end{TropicRatioTable3Col}

{% for subsection in body.regions -%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% {{ subsection.name }}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagebreak
\TsSubSection { {{- subsection.name -}} }

\textbf{Base Address:} {{ format_address(subsection.start_addr) }}
\newline
\textbf{End Address:} {{ format_address(subsection.end_addr) }}
\vspace{4mm}
    {% if subsection.regions %}
\begin{TropicRatioTable3Col}
{0.6}                                         {0.3}                               {0.1}
{Memory region                                & Address offset range              & Size}
        {% for subsubsection in subsection.regions %}
    \multirow {2} {*} {\hyperref[subsubsec:{{ subsubsection.name }}] { {{- subsubsection.name -}} }} & {{ format_address(subsubsection.start_addr) }} & \multirow {2} {*} { {{- subsubsection.size -}} } \\
                                                    & {{ format_address(subsubsection.end_addr) }} &    \Ttlb%
        {% endfor %}
\end{TropicRatioTable3Col}

        {% for subsubsection in subsection.regions %}
            {%- if subsubsection.generated_file -%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% {{ subsubsection.name }}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagebreak
\TsSubSubSection { {{- subsubsection.name -}} }

\textbf{Base Address:} {{ format_address(subsubsection.abs_start_addr) }}
\newline
\textbf{End Address:} {{ format_address(subsubsection.abs_end_addr) }}
\vspace{4mm}
{{ subsubsection.generated_file.read_text() }}
            {% endif -%}
        {%- endfor -%}
    {%- endif %}
{%- endfor %}
